# spf_js v0.2
# JavaScript management
# Simon Finch
# https://github.com/spiffin/spf_js

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMjp7czo0OiJuYW1lIjtzOjY6InNwZl9qcyI7czo3OiJ2ZXJzaW9uIjtzOjM6IjAuMiI7
czo2OiJhdXRob3IiO3M6MTE6IlNpbW9uIEZpbmNoIjtzOjEwOiJhdXRob3JfdXJpIjtzOjMz
OiJodHRwczovL2dpdGh1Yi5jb20vc3BpZmZpbi9zcGZfanMiO3M6MTE6ImRlc2NyaXB0aW9u
IjtzOjIxOiJKYXZhU2NyaXB0IG1hbmFnZW1lbnQiO3M6NToib3JkZXIiO3M6MToiNSI7czo0
OiJ0eXBlIjtzOjE6IjEiO3M6NToiZmxhZ3MiO3M6MToiMiI7czo4OiJ0ZXh0cGFjayI7czoy
MjQzOiIjQHNwZl9qcwpzcGZfamF2YXNjcmlwdCA9PiBKYXZhU2NyaXB0CnNwZl9qc19kaXIg
PT4gSmF2YVNjcmlwdCBkaXJlY3RvcnkKc3BmX3NjcmlwdF9uYW1lID0+IE5hbWUgZm9yIHRo
aXMgc2NyaXB0CnNwZl9lZGl0X3NjcmlwdCA9PiBZb3UgYXJlIGVkaXRpbmcgc2NyaXB0CnNw
Zl9jb3B5X3NjcmlwdCA9PiAmIzgyMzA7b3IgY29weSBzY3JpcHQgYXMKc3BmX2FsbF9zY3Jp
cHRzID0+IEFsbCBTY3JpcHRzCnNwZl9jcmVhdGVfbmV3X3NjcmlwdCA9PiBDcmVhdGUgbmV3
IHNjcmlwdApzcGZfc2NyaXB0X2NyZWF0ZWQgPT4gU2NyaXB0IDxzdHJvbmc+e25hbWV9PC9z
dHJvbmc+IGNyZWF0ZWQuCnNwZl9zY3JpcHRfZXhpc3RzID0+IFNjcmlwdCA8c3Ryb25nPntu
YW1lfTwvc3Ryb25nPiBhbHJlYWR5IGV4aXN0cy4Kc3BmX3NjcmlwdF9uYW1lX3JlcXVpcmVk
ID0+IFBsZWFzZSBwcm92aWRlIGEgbmFtZSBmb3IgeW91ciBzY3JpcHQuCnNwZl9zY3JpcHRf
dXBkYXRlZCA9PiBTY3JpcHQgPHN0cm9uZz57bmFtZX08L3N0cm9uZz4gdXBkYXRlZC4Kc3Bm
X3NjcmlwdF9kZWxldGVkID0+IFNjcmlwdCA8c3Ryb25nPntuYW1lfTwvc3Ryb25nPiBkZWxl
dGVkLgpzcGZfY2Fubm90X2RlbGV0ZV9kZWZhdWx0X3NjcmlwdCA9PiBTY3JpcHQgPHN0cm9u
Zz5kZWZhdWx0PC9zdHJvbmc+IGNhbm5vdCBiZSBkZWxldGVkLgojQGxhbmd1YWdlIGZyLWZy
CnNwZl9qYXZhc2NyaXB0ID0+IEphdmFTY3JpcHQKc3BmX2pzX2RpciA9PiBSw6lwZXJ0b2ly
ZSBKYXZhU2NyaXB0CnNwZl9zY3JpcHRfbmFtZSA9PiBOb20gZGUgY2Ugc2NyaXB0CnNwZl9l
ZGl0X3NjcmlwdCA9PiBWb3VzIMOpZGl0ZXogbGUgc2NyaXB0CnNwZl9jb3B5X3NjcmlwdCA9
PiBFbnJlZ2lzdHJlciBsZSBzY3JpcHQgc291cyBsZSBub20gOgpzcGZfYWxsX3NjcmlwdHMg
PT4gVG91cyBsZXMgc2NyaXB0cwpzcGZfY3JlYXRlX25ld19zY3JpcHQgPT4gQ3LDqWVyIHVu
IG5vdXZlYXUgc2NyaXB0CnNwZl9zY3JpcHRfY3JlYXRlZCA9PiBMZSBzY3JpcHQgPHN0cm9u
Zz57bmFtZX08L3N0cm9uZz4gYSDDqXTDqSBjcsOpw6kuCnNwZl9zY3JpcHRfZXhpc3RzID0+
IExlIHNjcmlwdCA8c3Ryb25nPntuYW1lfTwvc3Ryb25nPiBleGlzdGUgZMOpasOgLgpzcGZf
c2NyaXB0X25hbWVfcmVxdWlyZWQgPT4gVmV1aWxsZXogcmVuc2VpZ25lciB1biBub20gcG91
ciB2b3RyZSBzY3JpcHQuCnNwZl9zY3JpcHRfdXBkYXRlZCA9PiBMZSBzY3JpcHQgPHN0cm9u
Zz57bmFtZX08L3N0cm9uZz4gYSDDqXTDqSBtaXMgw6Agam91ci4Kc3BmX3NjcmlwdF9kZWxl
dGVkID0+IExlIHNjcmlwdCA8c3Ryb25nPntuYW1lfTwvc3Ryb25nPiBhIMOpdMOpIHN1cHBy
aW3DqS4Kc3BmX2Nhbm5vdF9kZWxldGVfZGVmYXVsdF9zY3JpcHQgPT4gTGUgc2NyaXB0IDxz
dHJvbmc+ZGVmYXVsdDwvc3Ryb25nPiBuZSBwZXV0IHBhcyDDqnRyZSBzdXBwcmltw6kuCiNA
bGFuZ3VhZ2UgZGUtZGUKc3BmX2phdmFzY3JpcHQgPT4gSmF2YVNjcmlwdApzcGZfanNfZGly
ID0+IEphdmFTY3JpcHQtVmVyemVpY2huaXMKc3BmX3NjcmlwdF9uYW1lID0+IE5hbWUgZGll
c2VzIFNjcmlwdApzcGZfZWRpdF9zY3JpcHQgPT4gU2llIGJlYXJiZWl0ZW4gZGFzIFNjcmlw
dApzcGZfY29weV9zY3JpcHQgPT4gS29waWVyZSBTY3JpcHQgYWxzOgpzcGZfYWxsX3Njcmlw
dHMgPT4gQWxsZSBTY3JpcHRzCnNwZl9jcmVhdGVfbmV3X3NjcmlwdCA9PiBOZXVlcyBTY3Jp
cHQgZXJzdGVsbGVuCnNwZl9zY3JpcHRfY3JlYXRlZCA9PiBTY3JpcHQgPHN0cm9uZz57bmFt
ZX08L3N0cm9uZz4gd3VyZGUgZXJzdGVsbHQuCnNwZl9zY3JpcHRfZXhpc3RzID0+IFNjcmlw
dCA8c3Ryb25nPntuYW1lfTwvc3Ryb25nPiBleGlzdGllcnQgYmVyZWl0cy4KU2NyaXB0IDxz
dHJvbmc+e25hbWV9PC9zdHJvbmc+IGV4aXN0aWVydCBiZXJlaXRzLgpzcGZfc2NyaXB0X25h
bWVfcmVxdWlyZWQgPT4gQml0dGUgdmVyZ2ViZW4gU2llIGVpbmVuIE5hbWVuIGbDvHIgSWhy
IFNjcmlwdC4Kc3BmX3NjcmlwdF91cGRhdGVkID0+IFNjcmlwdCA8c3Ryb25nPntuYW1lfTwv
c3Ryb25nPiB3dXJkZSBha3R1YWxpc2llcnQuCnNwZl9zY3JpcHRfZGVsZXRlZCA9PiBTY3Jp
cHQgPHN0cm9uZz57bmFtZX08L3N0cm9uZz4gd3VyZGUgZ2Vsw7ZzY2h0LgpzcGZfY2Fubm90
X2RlbGV0ZV9kZWZhdWx0X3NjcmlwdCA9PiBTY3JpcHQgPHN0cm9uZz5kZWZhdWx0PC9zdHJv
bmc+IGtvbm50ZSBuaWNodCBnZWzDtnNjaHQgd2VyZGVuLiI7czo0OiJoZWxwIjtzOjM2NDA6
ImgxLiBzcGZfanM6IEphdmFTY3JpcHQgbWFuYWdlbWVudAoKcC4gQ3JlYXRlLCBlZGl0IGFu
ZCBkZWxldGUgc2NyaXB0cyBpbiBUZXh0cGF0dGVybiBhZG1pbiBhbmQgZXhwb3J0IG9uIHNh
dmUgdG8gZXh0ZXJuYWwgZmlsZXMuCgpwLiBSRVFVSVJFUzogVGV4cGF0dGVybiA0LjQuMSBh
bmQgUEhQIDUuCgpwLiBQbGVhc2UgcmVhZCB0aGUgaW5zdHJ1Y3Rpb25zIGFuZCBub3RlcyBi
ZWxvdyBiZWZvcmUgdXNlLgoKcC4gTGF0ZXN0IHZlcnNpb246ICJzcGZfanMgR2l0SHViIHJl
cG9zaXRvcnkiOmh0dHBzOi8vZ2l0aHViLmNvbS9zcGlmZmluL3NwZl9qcwoKcC4gQSBjb21i
aW5hdGlvbiBvZiB0d28gcHJldmlvdXNseS1yZWxlYXNlZCBwbHVnaW5zOiBzdG1famF2YXNj
cmlwdCBieSBTdGFuaXNsYXYgTcO8bGxlciBhbmQgcnZtX2NzcyBieSBSdXVkIHZhbiBNZWxp
Y2suIFRoYW5rcyB0byB0aGUgb3JpZ2luYWwgYXV0aG9ycyBhbmQgdG8gSnVra2EgKEdvY29t
KSBhbmQgU3RlZiAoQmxva2UpIGZvciBpbnZhbHVhYmxlIGZlZWRiYWNrLgoKcC4gRmVhdHVy
ZXMgaW5jbHVkZSBleHBvcnRpbmcgc2NyaXB0cyBhcyBmaWxlcyB0byBhIGRpcmVjdG9yeSwg
b3B0aW9uYWwgInR5cGUiIGF0dHJpYnV0ZSBAdHlwZT0idGV4dC9qYXZhc2NyaXB0IkAgYW5k
IGNoYW5naW5nIHRoZSB0YWcgYXJndW1lbnQgZnJvbSBAbj1AIHRvIEBuYW1lPUAgdG8gYnJp
bmcgaXQgaW4gbGluZSB3aXRoIGRlZmF1bHQgY3NzIHN5bnRheC4gUmUtd3JpdHRlbiBmb3Ig
VGV4dHBhdHRlcm4gNC40LjEgdG8gbWltaWMgdGhlIFByZXNlbnRhdGlvbiAmZ3Q7IFN0eWxl
IHRhYi4KCgpoMi4gSW5zdHJ1Y3Rpb25zOgoKIyBDcmVhdGUgYSBkaXJlY3RvcnkgZm9yIHRo
ZSBzdGF0aWMgSmF2YVNjcmlwdCBmaWxlcyBpbiB0aGUgcm9vdCBvZiB5b3VyIHRleHRwYXR0
ZXJuIGluc3RhbGxhdGlvbi4gWW91IHNob3VsZCBtYWtlIHN1cmUgdGhhdCA8c3BhbiBjbGFz
cz0iY2FwcyI+UEhQPC9zcGFuPiBpcyBhYmxlIHRvIHdyaXRlIHRvIHRoYXQgZGlyZWN0b3J5
LgojIFZpc2l0IHRoZSBBZHZhbmNlZCBQcmVmZXJlbmNlcyAoQWRtaW4gJmd0OyBQcmVmZXJl
bmNlcyAmZ3Q7IEFkdmFuY2VkKSBhbmQgbWFrZSBzdXJlIHRoZSAiSmF2YVNjcmlwdCBkaXJl
Y3RvcnkiIHByZWZlcmVuY2UgY29udGFpbnMgdGhlIGRpcmVjdG9yeSB5b3UgY3JlYXRlZCBp
biBzdGVwIDEgKGJ5IGRlZmF1bHQgJ2pzJykuIFRoaXMgcGF0aCBpcyByZWxhdGl2ZSBwYXRo
IHRvIHRoZSBkaXJlY3Rvcnkgb2YgeW91ciByb290IFRleHRwYXR0ZXJuIGluc3RhbGxhdGlv
bi4KIyBBY3RpdmF0ZSB0aGlzIHBsdWdpbi4KIyBHbyB0byBQcmVzZW50YXRpb24gJmd0OyBK
YXZhU2NyaXB0IGFuZCBjcmVhdGUgSmF2YVNjcmlwdHMgeW91J2QgbGlrZSB0byBlbWJlZCB3
aXRoaW4geW91ciBwYWdlIHRlbXBsYXRlcy4KIyBKYXZhU2NyaXB0IGZpbGVzIGFyZSBzdG9y
ZWQgaW4gdGhlIGRhdGFiYXNlIChmb3IgZWFzeSBtYW5hZ2VtZW50IGFuZCBlZGl0aW5nKSBh
bmQsIG9uIHNhdmUsIGV4cG9ydGVkIHRvIGEgZGlyZWN0b3J5IGluIHlvdXIgd2Vic2l0ZSB3
aGVyZSB0aGV5IGNhbiBiZSByZWZlcmVuY2VkIChhcyBleHRlcm5hbCBKYXZhU2NyaXB0KSB3
aXRoIHRoZSB0YWcgYmVsb3cuCgoKCmgyLiBUYWdzOgoKQDx0eHA6c3BmX2pzIC8+IChlbWJl
ZHMgdGhlIGRlZmF1bHQgSmF2YVNjcmlwdCBmaWxlKUAKCkA8dHhwOnNwZl9qcyBuYW1lPSJt
eXNjcmlwdCIgLz4gKGVtYmVkcyB0aGUgSmF2YVNjcmlwdCBmaWxlIG5hbWVkICJteXNjcmlw
dCIpQAoKaDMuIEhUTUwgb3V0cHV0OgoKQDxzY3JpcHQgc3JjPSJodHRwOi8vbXlzaXRlLmNv
bS9qcy9teXNjcmlwdC5qcyI+PC9zY3JpcHQ+QAoKaDMuICJ0eXBlIiBhdHRyaWJ1dGUKCnAu
IEJ5IGRlZmF1bHQgdGhlIHBsdWdpbiBvdXRwdXRzIGEgc2NyaXB0IHRhZyB3aXRob3V0IHRo
ZSAiInR5cGUiIGF0dHJpYnV0ZSI6aHR0cDovL3d3dy53M3NjaG9vbHMuY29tL2h0bWw1L3Rh
Z19zY3JpcHQuYXNwIChyZXF1aXJlZCBpbiBYSFRNTC9IVE1MNCBidXQgb3B0aW9uYWwgaW4g
SFRNTDUpLgoKcC4gVG8gaW5jbHVkZSBhICJ0eXBlIiBhdHRyaWJ1dGUganVzdCB1c2UgdGhl
IEB0eXBlPSIxIkAgYXJndW1lbnQ6CgpAPHR4cDpzcGZfanMgbmFtZT0ibXlzY3JpcHQiIHR5
cGU9IjEiIC8+QAoKcC4gT3V0cHV0czoKCkA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlw
dCIgc3JjPSJodHRwOi8vbXlzaXRlLmNvbS9qcy9teXNjcmlwdC5qcyI+PC9zY3JpcHQ+QAoK
CgpoMi4gTm90ZXM6CgojIERvbid0IHVzZSBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMg
aW4gc2NyaXB0IG5hbWVzIChpZiB5b3UgdHJ5IHRvIHRoZXknbGwgYmUgc3RyaXBwZWQpLgoj
IFRoZSBwbHVnaW4gd2lsbCBjb252ZXJ0IHlvdXIgc2NyaXB0IG5hbWVzIHRvIGxvd2VyY2Fz
ZS4KIyBUaGUgcGx1Z2luIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IHRyeSB0byBlbWJl
ZCBhIG5vbi1leGlzdGVudCBzY3JpcHQgLSBzaW1pbGFyIHRvOiBAVGFnIGVycm9yOiAgIC0+
ICBUZXh0cGF0dGVybiBOb3RpY2U6IFRoZSByZXF1ZXN0ZWQgcmVzb3VyY2Ugd2FzIG5vdCBm
b3VuZC4gInNjcmlwdF9uYW1lIkAuCgpwLiAmbWRhc2g7IEluIHdoaWNoIGNhc2UgY2hlY2sg
dGhlIHNjcmlwdCBleGlzdHMgYW5kIHlvdXIgZW1iZWQgdGFnIGZvciB0eXBvcy4KCgoKaDIu
IHN0bV9qYXZhc2NyaXB0CgpwLiBJZiBzdG1famF2YXNjcmlwdCBpcyBpbnN0YWxsZWQgYW5k
IGFjdGl2YXRlZCB5b3Ugd2lsbCBzZWUgdHdvIEphdmFTY3JpcHQgdGFicyBpbiBQcmVzZW50
YXRpb24gLSBvbmUgbmFtZWQgJ0phdmFzY3JpcHQnIChzdG1famF2YXNjcmlwdCAtIHdpdGgg
bG93ZXJjYXNlICdzJykgYW5kIGFub3RoZXIgJ0phdmFTY3JpcHQnIChzcGZfanMgLSB1cHBl
cmNhc2UgJ1MnKS4gWW91IGNhbiBjb3B5IGFuZCBwYXN0ZSBzY3JpcHRzIGZyb20gc3RtX2ph
dmFzY3JpcHQgdG8gc3BmX2pzIC0gYW5kIHRoZW4gZGlzYWJsZSBzdG1famF2YXNjcmlwdC4g
SXQncyBub3QgYWR2aXNhYmxlIHRvIHJ1biBib3RoIHBsdWdpbnMgc2ltdWx0YW5lb3VzbHku
CgoKCmgyLiBMYW5ndWFnZSBzdXBwb3J0IChUZXh0cGFjaykKCnAuIFRoaXMgcGx1Z2luIHVz
ZXMgYW4gRW5nbGlzaCBUZXh0cGFjayBieSBkZWZhdWx0IGFuZCBpbnN0YWxscyBib3RoIEZy
ZW5jaCAoZnItZnIpIGFuZCBHZXJtYW4gKGRlLWRlKSBUZXh0cGFja3MuCgpwLiBUbyB1c2Ug
eW91ciBvd24gbGFuZ3VhZ2Ugc2VlIHRoZSAic3BmX2pzX3RleHRwYWNrIjpodHRwczovL3Jh
dy5naXRodWIuY29tL3NwaWZmaW4vc3BmX2pzL21hc3Rlci9zcGZfanNfdGV4dHBhY2sudHh0
IGZpbGUgaW4gdGhpcyByZXBvc2l0b3J5LgoKCgpoMi4gVmVyc2lvbiBoaXN0b3J5CgoqIDAu
MiAtIEFwcmlsIDIwMTIgJiM0MjsgRnJlbmNoICZhbXA7IEdlcm1hbiBUZXh0cGFja3MgYWRk
ZWQgKHRoYW5rcyBQYXRyaWNrICZhbXA7IFVsaSk7ICYjNDI7IGFkZGVkIGNvbXBhdGliaWxp
dHkgd2l0aCB0aGUgc3ludGF4LWhpZ2hsaWdodGluZyAic3BmX2NvZGVtaXJyb3IiOmh0dHBz
Oi8vZ2l0aHViLmNvbS9zcGlmZmluL3NwZl9jb2RlbWlycm9yLgoqIDAuMSAtIEFwcmlsIDIw
MTIgJiM0MjsgZmlyc3QgcmVsZWFzZS4iO3M6NDoiY29kZSI7czo5MjczOiIvKioKICogc3Bm
X2pzIC0gSmF2YVNjcmlwdCBtYW5hZ2VtZW50IGZvciBUZXh0cGF0dGVybgogKgogKiDCqSAy
MDEyIFNpbW9uIEZpbmNoIC0gaHR0cHM6Ly9naXRodWIuY29tL3NwaWZmaW4KICoKICogTGlj
ZW5zZWQgdW5kZXIgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAyCiAqIGh0
dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwtMi4wLmh0bWwKICoKICogVmVyc2lvbiAw
LjIgLS0gMjYgQXByaWwgMjAxMgogKgogKiBNYW55IHRoYW5rcyB0byBKdWtrYSBmb3IgaW52
YWx1YWJsZSBmZWVkYmFjawogKi8KCmlmIChAdHhwaW50ZXJmYWNlID09ICdhZG1pbicpIHsK
CiAgICBhZGRfcHJpdnMoJ3NwZl9qcycsICcxLDInKTsKICAgIHJlZ2lzdGVyX3RhYigncHJl
c2VudGF0aW9uJywgJ3NwZl9qcycsIGdUeHQoJ3NwZl9qYXZhc2NyaXB0JykpOwogICAgcmVn
aXN0ZXJfY2FsbGJhY2soJ3NwZl9qc19ldmVudCcsICdzcGZfanMnKTsKICAgIHJlZ2lzdGVy
X2NhbGxiYWNrKCdzcGZfanNfaW5zdGFsbCcsICdwbHVnaW5fbGlmZWN5Y2xlLnNwZl9qcycp
OwoKfQoKLyoqCiAqIEluc3RhbGxlciBmdW5jdGlvbgogKiBAcGFyYW0gc3RyaW5nICRldmVu
dCBBZG1pbi1zaWRlIGV2ZW50CiAqIEBwYXJhbSBzdHJpbmcgJHN0ZXAgQWRtaW4tc2lkZSwg
cGx1Z2luLWxpZmVjeWNsZSBzdGVwCiAqLwoKZnVuY3Rpb24gc3BmX2pzX2luc3RhbGwoJGV2
ZW50PScnLCAkc3RlcD0nJykgewoKICAgIGdsb2JhbCAkcHJlZnM7CgogICAgaWYoJHN0ZXAg
PT0gJ2RlbGV0ZWQnKSB7CgogICAgICAgIHNhZmVfZGVsZXRlKAogICAgICAgICAgICAndHhw
X3ByZWZzJywKICAgICAgICAgICAgIm5hbWU9J3NwZl9qc19kaXInIgogICAgICAgICk7Cgog
ICAgICAgIEBzYWZlX3F1ZXJ5KAogICAgICAgICAgICAnRFJPUCBUQUJMRSBJRiBFWElTVFMg
Jy5zYWZlX3BmeCgnc3BmX2pzJykKICAgICAgICApOwoKICAgICAgICAvLyBkZWxldGUgdGhl
IFRleHRwYWNrCgogICAgICAgIHNhZmVfZGVsZXRlKAogICAgICAgICAgICAndHhwX2xhbmcn
LAogICAgICAgICAgICAiZXZlbnQgPSAnc3BmX2pzJyIKICAgICAgICApOwoKICAgICAgICBy
ZXR1cm47CgogICAgfQoKICAgIC8qIENyZWF0ZSB0YWJsZSwgcHJlZnMgYW5kIGRlZmF1bHQu
anMgd2hlbiBzcGZfanNfZGlyIGlzbid0IHNldCAqLwoKICAgIGlmKCFpc3NldCgkcHJlZnNb
J3NwZl9qc19kaXInXSkpIHsKCiAgICAgICAgc2FmZV9xdWVyeSgKICAgICAgICAgICAgIkNS
RUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTICIuc2FmZV9wZngoJ3NwZl9qcycpLiIgKAogICAg
ICAgICAgICAgICAgbmFtZSB2YXJjaGFyKDI1NSkgTk9UIE5VTEwgZGVmYXVsdCAnJywKICAg
ICAgICAgICAgICAgIGpzIGxvbmd0ZXh0IE5PVCBOVUxMLAogICAgICAgICAgICAgICAgUFJJ
TUFSWSBLRVkobmFtZSkKICAgICAgICAgICAgKSBDSEFSU0VUPXV0ZjgiCiAgICAgICAgKTsK
CiAgICAgICAgaWYoIXNhZmVfY291bnQoInNwZl9qcyIsICJuYW1lPSdkZWZhdWx0JyIpKSB7
CgogICAgICAgICAgICBzYWZlX2luc2VydCgic3BmX2pzIiwgIm5hbWU9J2RlZmF1bHQnLCBq
cz0nLy8gWW91ciBkZWZhdWx0IEphdmFTY3JpcHQnIik7CgogICAgICAgIH0KCiAgICAgICAg
c2FmZV9pbnNlcnQoCiAgICAgICAgICAgICd0eHBfcHJlZnMnLAogICAgICAgICAgICAicHJl
ZnNfaWQ9MSwKICAgICAgICAgICAgbmFtZT0nc3BmX2pzX2RpcicsCiAgICAgICAgICAgIHZh
bD0nanMnLAogICAgICAgICAgICB0eXBlPTEsCiAgICAgICAgICAgIGV2ZW50PSdhZG1pbics
CiAgICAgICAgICAgIGh0bWw9J3RleHRfaW5wdXQnLAogICAgICAgICAgICBwb3NpdGlvbj0y
MSIKICAgICAgICApOwogICAgfQp9CgovKioKICogRXZlbnQgZnVuY3Rpb25zCiAqLwoKZnVu
Y3Rpb24gc3BmX2pzX2V2ZW50KCkgewoKICAgIGdsb2JhbCAkZXZlbnQsICRzdGVwOwoKICAg
IGlmICgkZXZlbnQgPT0gJ3NwZl9qcycpIHsKICAgICAgICByZXF1aXJlX3ByaXZzKCdzcGZf
anMnKTsKCiAgICAgICAgYm91bmNlcigkc3RlcCwKICAgICAgICAgICAgYXJyYXkoCiAgICAg
ICAgICAgICAgICAnc3BmX2pzX2VkaXRfcmF3JyAgID0+IGZhbHNlLAogICAgICAgICAgICAg
ICAgJ3BvdXInICAgICAgICAgICAgICA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdzcGZf
anNfc2F2ZScgICAgICAgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdzcGZfanNfY29weScg
ICAgICAgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdzcGZfanNfZGVsZXRlJyAgICAgPT4g
dHJ1ZSwKICAgICAgICAgICAgICAgICdzcGZfanNfZWRpdCcgICAgICAgPT4gZmFsc2UsCiAg
ICAgICAgICAgICkKICAgICAgICApOwoKICAgICAgICBzd2l0Y2ggKCRzdGVwKSB7CiAgICAg
ICAgICAgIGNhc2UgJyc6IHNwZl9qc19lZGl0KCk7ICAgICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrOwogICAgICAgICAgICBjYXNlICdzcGZfanNfZWRpdF9yYXcnOiBzcGZfanNfZWRp
dCgpOyAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAncG91cic6IHNwZl9qc19l
ZGl0KCk7ICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3Nw
Zl9qc19zYXZlJzogc3BmX2pzX3NhdmUoKTsgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg
ICAgICBjYXNlICdzcGZfanNfY29weSc6IHNwZl9qc19jb3B5KCk7ICAgICAgICAgICAgICBi
cmVhazsKICAgICAgICAgICAgY2FzZSAnc3BmX2pzX2RlbGV0ZSc6IHNwZl9qc19kZWxldGUo
KTsgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3NwZl9qc19lZGl0Jzogc3Bm
X2pzX2VkaXQoKTsKICAgICAgICB9CiAgICB9Cn0KCi8qKgogKiBPdXRwdXQgdGFnCiAqLwoK
ZnVuY3Rpb24gc3BmX2pzKCRhdHRzKSB7CgogICAgZ2xvYmFsICRwcmVmczsKCiAgICBleHRy
YWN0KGxBdHRzKGFycmF5KAogICAgICAgICduYW1lJyA9PiAnZGVmYXVsdCcsCiAgICAgICAg
J3R5cGUnID0+ICcnCiAgICApLCAkYXR0cykpOwoKICAgICRuYW1lID0gc3RydG9sb3dlcihz
YW5pdGl6ZUZvclVybCgkbmFtZSkpOwoKICAgIGlmKCFzYWZlX3JvdygnbmFtZScsICdzcGZf
anMnLCAibmFtZT0nIi5kb1NsYXNoKCRuYW1lKS4iJyIpKSB7CgogICAgICAgICB0cmlnZ2Vy
X2Vycm9yKGdUeHQoJzQwNF9ub3RfZm91bmQnKS5zcC5zdHJvbmcoJyInLiRuYW1lLiciJykp
OwoKICAgICAgICByZXR1cm47CgogICAgfQoKICAgIGlmICghJHR5cGUpIHsKCiAgICAgICAg
cmV0dXJuICc8c2NyaXB0IHNyYz0iJy5odG1sc3BlY2lhbGNoYXJzKGh1LiRwcmVmc1snc3Bm
X2pzX2RpciddLicvJy4kbmFtZSkuJy5qcyI+PC9zY3JpcHQ+JzsKCiAgICB9IGVsc2UgewoK
ICAgICAgICByZXR1cm4gJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Iicu
aHRtbHNwZWNpYWxjaGFycyhodS4kcHJlZnNbJ3NwZl9qc19kaXInXS4nLycuJG5hbWUpLicu
anMiPjwvc2NyaXB0Pic7CgogICAgfQoKICAgIC8vIFRvIG1pbmlmeSBvdXRwdXQgKHJlcXVp
cmVzIE1pbmlmeSk6CiAgICAvLyByZXR1cm4gJzxzY3JpcHQgc3JjPSInLmh0bWxzcGVjaWFs
Y2hhcnMoaHUuJ21pbi9mPScuJHByZWZzWydzcGZfanNfZGlyJ10uJy8nLiRuYW1lKS4nLmpz
Ij48L3NjcmlwdD4nOwoKfQoKLyoqCiAqIExpc3QgZnVuY3Rpb24KICovCgpmdW5jdGlvbiBz
cGZfanNfbGlzdCgkbmFtZSkgewoKICAgICRvdXRbXSA9IHN0YXJ0VGFibGUoJ2xpc3QnLCAn
bGVmdCcpOwoKICAgICRycyA9IHNhZmVfcm93c19zdGFydCgibmFtZSBhcyBqc25hbWUiLCAo
InNwZl9qcyIpLCAiMT0xIik7CgogICAgaWYgKCRycykgewoKICAgICAgICB3aGlsZSAoJGEg
PSBuZXh0Um93KCRycykpIHsKICAgICAgICAgICAgZXh0cmFjdCgkYSk7CiAgICAgICAgICAg
ICRlZGl0ID0gKCRuYW1lIT0kanNuYW1lKSA/IGVMaW5rKCdzcGZfanMnLCAnJywgJ25hbWUn
LCAkanNuYW1lLCAkanNuYW1lKSA6IGh0bWxzcGVjaWFsY2hhcnMoJG5hbWUpOwogICAgICAg
ICAgICAkZGVsZXRlID0gKCRqc25hbWUhPSdkZWZhdWx0JykgPyBkTGluaygnc3BmX2pzJywg
J3NwZl9qc19kZWxldGUnLCAnbmFtZScsICRqc25hbWUpIDogJyc7CiAgICAgICAgICAgICRv
dXRbXSA9IHRyKHRkKCRlZGl0KS50ZCgkZGVsZXRlKSk7CiAgICAgICAgfQoKICAgICAgICAk
b3V0W10gPSAgZW5kVGFibGUoKTsKCiAgICAgICAgcmV0dXJuIGpvaW4oJycsICRvdXQpOwoK
ICAgIH0KfQoKLyoqCiAqIEVkaXQgZnVuY3Rpb24KICovCgpmdW5jdGlvbiBzcGZfanNfZWRp
dCgkbWVzc2FnZT0nJykgewoKICAgIHBhZ2V0b3AoZ1R4dCgnc3BmX2phdmFzY3JpcHQnKSwk
bWVzc2FnZSk7CiAgICBnbG9iYWwgJHN0ZXAsICRwcmVmczsKICAgIHNwZl9qc19lZGl0X3Jh
dygpOwoKfQoKLyoqCiAqIEVkaXQgZnVuY3Rpb24gKHJhdykKICovCgpmdW5jdGlvbiBzcGZf
anNfZWRpdF9yYXcoKSB7CgogICAgZ2xvYmFsICRldmVudCwgJHN0ZXA7CgogICAgJGRlZmF1
bHRfbmFtZSA9ICdkZWZhdWx0JzsKICAgIGV4dHJhY3QoZ3BzYShhcnJheSgnbmFtZScsICdu
ZXduYW1lJywgJ2NvcHknLCAnc2F2ZW5ldycpKSk7CgogICAgaWYgKCRzdGVwID09ICdzcGZf
anNfZGVsZXRlJyB8fCBlbXB0eSgkbmFtZSkgJiYgJHN0ZXAgIT0gJ3BvdXInICYmICEkc2F2
ZW5ldykgewoKICAgICAgICAkbmFtZSA9ICRkZWZhdWx0X25hbWU7CiAgICB9CgogICAgZWxz
ZWlmICgoJGNvcHkgfHwgJHNhdmVuZXcpICYmIHRyaW0ocHJlZ19yZXBsYWNlKCcvWzw+JiJc
J10vJywgJycsICRuZXduYW1lKSkpIHsKCiAgICAgICAgJG5hbWUgPSAkbmV3bmFtZTsKCiAg
ICB9CgogICAgaWYgKGVtcHR5KCRuYW1lKSkgewoKICAgICAgICAkYnV0dG9ucyA9ICc8ZGl2
IGNsYXNzPSJlZGl0LXRpdGxlIj4nLgogICAgICAgIGdUeHQoJ3NwZl9zY3JpcHRfbmFtZScp
Lic6ICcKICAgICAgICAuZklucHV0KCd0ZXh0JywnbmV3bmFtZScsJycsJ2VkaXQnLCcnLCcn
LDIwKS4KICAgICAgICBoSW5wdXQoJ3NhdmVuZXcnLCdzYXZlbmV3JykuCiAgICAgICAgJzwv
ZGl2Pic7CiAgICAgICAgJHRoZWpzID0gZ3BzKCdzcGZfanMnKTsKCiAgICB9IGVsc2UgewoK
ICAgICAgICAkYnV0dG9ucyA9ICc8ZGl2IGNsYXNzPSJlZGl0LXRpdGxlIj4nLmdUeHQoJ3Nw
Zl9lZGl0X3NjcmlwdCcpLnNwLnN0cm9uZyhodG1sc3BlY2lhbGNoYXJzKCRuYW1lKSkuJzwv
ZGl2Pic7CiAgICAgICAgJHRoZWpzID0gZmV0Y2goImpzIiwnc3BmX2pzJywnbmFtZScsJG5h
bWUpOwoKICAgIH0KCiAgICBpZiAoIWVtcHR5KCRuYW1lKSkgewoKICAgICAgICAkY29weSA9
ICc8c3BhbiBjbGFzcz0iY29weS1hcyI+PGxhYmVsIGZvcj0iY29weS1qcyI+Jy5nVHh0KCdz
cGZfY29weV9zY3JpcHQnKS4nPC9sYWJlbD4nLnNwLmZJbnB1dCgndGV4dCcsICduZXduYW1l
JywgJycsICdlZGl0JywgJycsICcnLCAnJywgJycsICdjb3B5LWpzJykuc3AuCiAgICAgICAg
ICAgIGZJbnB1dCgnc3VibWl0JywgJ2NvcHknLCBnVHh0KCdjb3B5JyksICdzbWFsbGVyYm94
JykuJzwvc3Bhbj4nOwoKICAgIH0gZWxzZSB7CgogICAgICAgICRjb3B5ID0gJyc7CgogICAg
fQoKICAgICRyaWdodCA9CiAgICAnPGRpdiBpZD0iY29udGVudF9zd2l0Y2hlciI+Jy4KICAg
IGhlZChnVHh0KCdzcGZfYWxsX3NjcmlwdHMnKSwyKS4KICAgIGdyYWYoc0xpbmsoJ3NwZl9q
cycsICdwb3VyJywgZ1R4dCgnc3BmX2NyZWF0ZV9uZXdfc2NyaXB0JykpLCAnIGNsYXNzPSJh
Y3Rpb24tY3JlYXRlIHNtYWxsZXJib3giJykuCiAgICBzcGZfanNfbGlzdCgkbmFtZSwgJGRl
ZmF1bHRfbmFtZSkuCiAgICAnPC9kaXY+JzsKCiAgICBlY2hvCiAgICAnPGRpdiBpZD0iJy4k
ZXZlbnQuJ19jb250YWluZXIiIGNsYXNzPSJ0eHAtY29udGFpbmVyIHR4cC1lZGl0Ij4nLgog
ICAgc3RhcnRUYWJsZSgnZWRpdCcpLgogICAgdHIoCiAgICAgICAgdGQoCiAgICAgICAgICAg
IGZvcm0oCiAgICAgICAgICAgICAgICAnPGRpdiBpZD0ibWFpbl9jb250ZW50Ij4nLgogICAg
ICAgICAgICAgICAgJGJ1dHRvbnMuCiAgICAgICAgICAgICAgICAnPHRleHRhcmVhIGlkPSJz
cGZfanMiIGNsYXNzPSJjb2RlIiBuYW1lPSJzcGZfanMiIGNvbHM9Ijc4IiByb3dzPSIzMiIg
c3R5bGU9Im1hcmdpbi10b3A6IDZweDsgd2lkdGg6IDcwMHB4OyBoZWlnaHQ6IDUxNXB4OyI+
Jy5odG1sc3BlY2lhbGNoYXJzKCR0aGVqcykuJzwvdGV4dGFyZWE+Jy5ici4KICAgICAgICAg
ICAgICAgIGZJbnB1dCgnc3VibWl0JywnJyxnVHh0KCdzYXZlJyksJ3B1Ymxpc2gnKS4KICAg
ICAgICAgICAgICAgIGVJbnB1dCgnc3BmX2pzJykuc0lucHV0KCdzcGZfanNfc2F2ZScpLgog
ICAgICAgICAgICAgICAgaElucHV0KCduYW1lJywkbmFtZSkKICAgICAgICAgICAgICAgIC4k
Y29weS4KICAgICAgICAgICAgICAgICc8L2Rpdj4nCiAgICAgICAgICAgICwgJycsICcnLCAn
cG9zdCcsICdlZGl0LWZvcm0nLCAnJywgJ3N0eWxlX2Zvcm0nKQogICAgICAgICwgJycsICdj
b2x1bW4nKS4KICAgICAgICB0ZHRsKAogICAgICAgICAgICAkcmlnaHQKICAgICAgICAsICcg
Y2xhc3M9ImNvbHVtbiInKQogICAgKS4KICAgIGVuZFRhYmxlKCkuCiAgICAnPC9kaXY+JzsK
fQoKLyoqCiAqIENvcHkgZnVuY3Rpb24KICoKICovCgpmdW5jdGlvbiBzcGZfanNfY29weSgp
IHsKCiAgICBleHRyYWN0KGdwc2EoYXJyYXkoJ29sZG5hbWUnLCAnbmV3bmFtZScpKSk7Cgog
ICAgJGpzID0gZG9TbGFzaChmZXRjaCgnanMnLCAnc3BmX2pzJywgJ25hbWUnLCAkb2xkbmFt
ZSkpOwoKICAgICRycyA9IHNhZmVfaW5zZXJ0KCdzcGZfanMnLCAianMgPSAnJGpzJywgbmFt
ZSA9ICciLmRvU2xhc2goJG5ld25hbWUpLiInIik7CgogICAgc3BmX2pzX2VkaXQoCiAgICAg
ICAgZ1R4dCgnc3BmX3NjcmlwdF9jcmVhdGVkJywgYXJyYXkoJ3tuYW1lfScgPT4gJG5ld25h
bWUpKQogICAgKTsKfQoKLyoqCiAqIFNhdmUgZnVuY3Rpb24KICovCgpmdW5jdGlvbiBzcGZf
anNfc2F2ZSgpIHsKCiAgICBleHRyYWN0KGdwc2EoYXJyYXkoJ25hbWUnLCdzcGZfanMnLCdz
YXZlbmV3JywnbmV3bmFtZScsJ2NvcHknKSkpOwogICAgJGpzID0gZG9TbGFzaCgkc3BmX2pz
KTsKCiAgICBpZiAoJHNhdmVuZXcgb3IgJGNvcHkpIHsKCiAgICAgICAgJG5ld25hbWUgPSBk
b1NsYXNoKHRyaW0ocHJlZ19yZXBsYWNlKCcvWzw+JiJcJ10vJywgJycsIGdwcygnbmV3bmFt
ZScpKSkpOwoKICAgICAgICBpZiAoJG5ld25hbWUgYW5kIHNhZmVfZmllbGQoJ25hbWUnLCAn
c3BmX2pzJywgIm5hbWUgPSAnJG5ld25hbWUnIikpIHsKCiAgICAgICAgICAgICRtZXNzYWdl
ID0gZ1R4dCgnc3BmX3NjcmlwdF9leGlzdHMnLCBhcnJheSgne25hbWV9JyA9PiAkbmV3bmFt
ZSkpOwoKICAgICAgICAgICAgaWYgKCRzYXZlbmV3KSB7CgogICAgICAgICAgICAgICAgJF9Q
T1NUWyduZXduYW1lJ10gPSAnJzsKCiAgICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlaWYg
KCRuZXduYW1lKSB7CgogICAgICAgICAgICBzYWZlX2luc2VydCgnc3BmX2pzJywgIm5hbWUg
PSAnIi4kbmV3bmFtZS4iJywganMgPSAnJGpzJyIpOwoKICAgICAgICAgICAgJG1lc3NhZ2Ug
PSBnVHh0KCdzcGZfc2NyaXB0X2NyZWF0ZWQnLCBhcnJheSgne25hbWV9JyA9PiAkbmV3bmFt
ZSkpOwoKICAgICAgICAgICAgc3BmX2pzX3dyaXRlKCk7CgogICAgICAgIH0gZWxzZSB7Cgog
ICAgICAgICAgICAkbWVzc2FnZSA9IGFycmF5KGdUeHQoJ3NwZl9zY3JpcHRfbmFtZV9yZXF1
aXJlZCcpLCBFX0VSUk9SKTsKCiAgICAgICAgfQoKICAgICAgICBzcGZfanNfZWRpdCgkbWVz
c2FnZSk7CgogICAgfSBlbHNlIHsKCiAgICAgICAgc2FmZV91cGRhdGUoJ3NwZl9qcycsICJq
cyA9ICckanMnIiwgIm5hbWUgPSAnIi5kb1NsYXNoKCRuYW1lKS4iJyIpOwoKICAgICAgICAk
bWVzc2FnZSA9IGdUeHQoJ3NwZl9zY3JpcHRfdXBkYXRlZCcsIGFycmF5KCd7bmFtZX0nID0+
ICRuYW1lKSk7CgogICAgICAgIHNwZl9qc193cml0ZSgpOwoKICAgICAgICBzcGZfanNfZWRp
dCgkbWVzc2FnZSk7CgogICAgfQoKfQoKLyoqCiAqIFdyaXRlIGZ1bmN0aW9uCiAqLwoKZnVu
Y3Rpb24gc3BmX2pzX3dyaXRlKCkgewoKICAgIGdsb2JhbCAkcHJlZnM7CiAgICBleHRyYWN0
KGdwc2EoYXJyYXkoJ25hbWUnLCdzcGZfanMnLCdzYXZlbmV3JywnbmV3bmFtZScsJ2NvcHkn
KSkpOwoKICAgICRuYW1lID0gKHBzKCdjb3B5Jykgb3IgcHMoJ3NhdmVuZXcnKSkgPyBwcygn
bmV3bmFtZScpIDogcHMoJ25hbWUnKTsKICAgICRmaWxlbmFtZSA9IHN0cnRvbG93ZXIoc2Fu
aXRpemVGb3JVcmwoJG5hbWUpKTsKICAgICRmaWxlID0gJHByZWZzWydwYXRoX3RvX3NpdGUn
XS4nLycuJHByZWZzWydzcGZfanNfZGlyJ10uJy8nLiRmaWxlbmFtZTsKCiAgICBpZiAoZW1w
dHkoJHByZWZzWydzcGZfanNfZGlyJ10pIG9yICEkZmlsZW5hbWUpIHsKCiAgICAgICAgcmV0
dXJuOwoKICAgIH0gZWxzZSB7CgogICAgJGpzX3JhdyA9IGZldGNoKCJqcyIsICJzcGZfanMi
LCAnbmFtZScsICRuYW1lKTsgLy8gTW92ZWQgaGVyZSB0byBzYXZlIG5ld2x5LWNyZWF0ZWQg
c2NyaXB0cwoKICAgICAgICAkaGFuZGxlID0gZm9wZW4oJGZpbGUuJy5qcycsICd3YicpOwog
ICAgICAgIGZ3cml0ZSgkaGFuZGxlLCAkanNfcmF3KTsKICAgICAgICBmY2xvc2UoJGhhbmRs
ZSk7CiAgICAgICAgY2htb2QoJGZpbGUuJy5qcycsIDA2NDQpOwogICAgfQoKfQoKLyoqCiAq
IERlbGV0ZSBmdW5jdGlvbgogKi8KCmZ1bmN0aW9uIHNwZl9qc19kZWxldGUoKSB7CgogICAg
Z2xvYmFsICRwcmVmczsKCiAgICAkbmFtZSA9IHN0cnRvbG93ZXIoc2FuaXRpemVGb3JVcmwo
cHMoJ25hbWUnKSkpOwogICAgJGZpbGUgPSAkcHJlZnNbJ3BhdGhfdG9fc2l0ZSddLicvJy4k
cHJlZnNbJ3NwZl9qc19kaXInXS4nLycuJG5hbWU7CgogICAgaWYgKCRuYW1lICE9ICdkZWZh
dWx0JykgewoKICAgICAgICBzYWZlX2RlbGV0ZSgic3BmX2pzIiwgIm5hbWUgPSAnIi5kb1Ns
YXNoKCRuYW1lKS4iJyIpOwoKICAgICAgICBpZiAoIWVtcHR5KCRwcmVmc1snc3BmX2pzX2Rp
ciddKSBhbmQgJG5hbWUpIHsKCiAgICAgICAgICAgIEB1bmxpbmsoJGZpbGUuJy5qcycpOwoK
ICAgICAgICB9CgogICAgICAgIHNwZl9qc19lZGl0KAoKICAgICAgICAgICAgZ1R4dCgnc3Bm
X3NjcmlwdF9kZWxldGVkJywgYXJyYXkoJ3tuYW1lfScgPT4gJG5hbWUpKQogICAgICAgICk7
CgogICAgfSBlbHNlIHsKCiAgICAgICAgZWNobyBnVHh0KCdzcGZfY2Fubm90X2RlbGV0ZV9k
ZWZhdWx0X3NjcmlwdCcpLicuJzsKCiAgICB9Cn0iO3M6MzoibWQ1IjtzOjMyOiJjNjhmYjcy
N2JhOTNjODdjZjAwN2Q1YThjMjRjMjBjYiI7fQ==